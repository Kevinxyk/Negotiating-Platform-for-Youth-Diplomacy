<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¤–äº¤è°ˆåˆ¤æ¨¡æ‹Ÿä¼šåœº</title>
  <link rel="stylesheet" href="styles.css">
  <script src="chat.js"></script>
  <script type="module">
    import { currentConfig } from './config.js';
    import { addAuthHeader, handleError } from './utils.js';
    
    // å…¨å±€é…ç½®
    window.roomId = 'your-room-id'; // ä»URLæˆ–é…ç½®ä¸­è·å–
    window.currentUser = 'your-user-id'; // ä»ç™»å½•ä¿¡æ¯ä¸­è·å–
    window.API_BASE_URL = currentConfig.apiUrl;
    window.WS_URL = currentConfig.wsUrl;
  </script>
  <script type="module">
    import { currentConfig } from './config.js';
    window.API_BASE_URL = currentConfig.apiUrl;
    window.WS_URL = currentConfig.wsUrl;
  </script>
</head>
<body>
  <!-- å·¦ä¾§å¯¼èˆªæ  -->
  <div class="sidebar">
    <button class="icon-button">âŒ‚</button>
    <button class="icon-button">ğŸ“¹</button>
    <button class="icon-button">ğŸ–‹ï¸</button>
    <button class="icon-button">âš™ï¸</button>
  </div>

  <!-- ä¸­é—´ä¸»åŒºåŸŸ -->
  <div class="main">
    <!-- é¡¶éƒ¨ä¿¡æ¯æ  -->
    <div class="top-bar">
      <div class="left-info">
        <h2>å›½é™…å•†åŠ¡è°ˆåˆ¤å¤§èµ› æ ¡å†…èµ›</h2>
        <p>2023å¹´4æœˆ3æ—¥</p>
      </div>
      <div class="right-info">
        <span>å‚ä¼šè€…ï¼š<span id="participantCount">28</span></span>
        <span>ç¼ºå¸­è€…ï¼š<span id="absentCount">7</span></span>
      </div>
    </div>

    <!-- å±å¹•åŒºåŸŸ -->
    <div class="screen">
      <div class="main-image-area">
        <img src="tanpan.jpg" alt="å¤–äº¤è°ˆåˆ¤" class="main-negotiation-img">
      </div>
      <div class="center-widgets">
        <div class="timer-area">
          <span id="timer-label">å‰©ä½™æ—¶é—´ï¼š</span>
          <span id="timer-value">00:00</span>
          <button id="pauseBtn">æš‚åœ</button>
          <button id="resumeBtn" style="display:none;">æ¢å¤</button>
        </div>
        <div class="score-area">
          <h3>è¯„åˆ†å±•ç¤º</h3>
          <div>æ€»åˆ†ï¼š<span id="total-score">0</span></div>
          <div>æ’åï¼š<span id="ranking">-</span></div>
        </div>
      </div>
      <!-- ä¸ŠåŠåŒºï¼ˆ70%ï¼‰ -->
      <div class="upper-section">
        <!-- éŸ³é‡æ§åˆ¶ -->
        <div class="left-audio-control">
          <div class="volume-slider">
            <div class="volume-knob"></div>
          </div>
          <div class="speaker-icon">ğŸ”Š</div>
        </div>
        <!-- å½•éŸ³ / å…¨å± -->
        <div class="right-controls">
          <button id="recordBtn">å½•éŸ³</button>
          <button id="fullscreenBtn">â¤¢</button>
        </div>
        <!-- éº¦å…‹é£ / æ‘„åƒå¤´ / æŒ‚æ–­ -->
        <div class="controls">
          <button id="micBtn" class="control-btn mic-btn">
            <span class="icon">ğŸ¤</span><span class="label">éº¦å…‹é£</span>
          </button>
          <button id="camBtn" class="control-btn cam-btn">
            <span class="icon">âœ–</span><span class="label">å…³é—­æ‘„åƒå¤´</span>
          </button>
          <button class="control-btn hangup-btn">
            <span class="label">æŒ‚æ–­</span>
          </button>
        </div>
      </div>
      <!-- ä¸‹åŠåŒºï¼ˆ30%ï¼‰ -->
      <div class="lower-section">
        <div class="participants">
          <img src="picture1.jpg" alt="">
          <img src="picture2.jpg" alt="">
          <img src="picture3.jpg" alt="">
          <img src="picture4.jpg" alt="">
          <img src="picture5.jpg" alt="">
        </div>
      </div>
    </div>
  </div>

  <!-- å³ä¾§"è°ˆè¯ + èŠå¤©"é¢æ¿ -->
  <div class="chat-panel">
    <!-- è°ˆè¯åŒº -->
    <div class="section talk-section">
      <div class="section-header">
        <span>è°ˆè¯ (<span id="talkCount">28</span>)</span>
        <a href="#">æŸ¥çœ‹æ‰€æœ‰</a>
      </div>
      <ul class="talk-list">
        <li class="talk-item">
          <img src="https://randomuser.me/api/portraits/men/11.jpg" class="avatar" />
          <div class="talk-info">
            <strong>æœ¬å°¼ Â· m Â· å…°å¾·é‡Œ</strong>
            <span class="email">BennyMLandry@rh...</span>
          </div>
          <div class="talk-status">
            <span class="icon mic-on">ğŸ¤</span>
          </div>
        </li>
        <li class="talk-item">
          <img src="https://randomuser.me/api/portraits/women/12.jpg" class="avatar" />
          <div class="talk-info">
            <strong>è‰¾ä¼¯ç‰¹ Â· c Â· ç½—ä¼¯</strong>
            <span class="email">ertCRoberts@dayrep...</span>
          </div>
          <div class="talk-status">
            <span class="icon mic-off">ğŸ”‡</span>
          </div>
        </li>
      </ul>
    </div>
    <!-- èŠå¤©åŒº -->
    <div class="section chat-section">
      <div class="section-header">èŠå¤© (<span id="chatCount">0</span>)</div>
      <div class="chat-messages" id="chatBox">
        <!-- æ¶ˆæ¯ä¼šåœ¨è¿™é‡ŒåŠ¨æ€æ·»åŠ  -->
      </div>
      <div class="chat-input">
        <button class="emoji-btn">ğŸ˜Š</button>
        <button class="upload-btn">ğŸ“</button>
        <input type="text" id="chatInput" placeholder="è¾“å…¥ä½ çš„æ¶ˆæ¯...">
        <button class="send-btn" id="sendBtn">â¤</button>
      </div>
    </div>
    
    <!-- åœ¨ body æ ‡ç­¾ç»“æŸå‰æ·»åŠ è„šæœ¬ -->
    <script>
    // å…¨å±€å‡½æ•°
    function sendMsg() {
      const input = document.getElementById('chatInput');
      const chatBox = document.getElementById('chatBox');
      const value = input.value.trim();
      
      if (value) {
        // åˆ›å»ºæ¶ˆæ¯å…ƒç´ 
        const p = document.createElement('p');
        p.classList.add('me');
        p.innerHTML = `<strong>æˆ‘:</strong> ${value}`;
        
        // æ·»åŠ åˆ°èŠå¤©æ¡†
        chatBox.appendChild(p);
        
        // æ¸…ç©ºè¾“å…¥æ¡†
        input.value = '';
        
        // æ»šåŠ¨åˆ°åº•éƒ¨
        chatBox.scrollTop = chatBox.scrollHeight;
        
        // æ›´æ–°æ¶ˆæ¯è®¡æ•°
        const chatCount = document.getElementById('chatCount');
        chatCount.textContent = chatBox.children.length;
      }
    }
    
    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function() {
      // ç»‘å®šå‘é€æŒ‰é’®ç‚¹å‡»äº‹ä»¶
      document.getElementById('sendBtn').addEventListener('click', sendMsg);
      
      // ç»‘å®šå›è½¦å‘é€
      document.getElementById('chatInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          e.preventDefault();
          sendMsg();
        }
      });
    });
    </script>
  </div>

  <script type="module" src="script.js"></script>
</body>
</html>